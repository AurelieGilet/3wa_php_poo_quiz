const questionAjaxCall=()=>{function filterQuestionsByCategory(button){const categoryId=button.dataset.categoryId;const questionBloc=document.getElementById("category-questions");const xhr=new XMLHttpRequest();xhr.onreadystatechange=function(){if(this.readyState===4){if(this.status===200){questionBloc.innerHTML=this.responseText}else{questionBloc.innerHTML="Une erreur s'est produite, merci de contacter l'administrateur du site."}}};xhr.open("GET","/admin/questions/"+categoryId);xhr.send()}
const categoriesFilters=document.querySelectorAll('[data-controls="category-filter"]');if(categoriesFilters.length){categoriesFilters.forEach((button)=>{button.addEventListener("click",()=>filterQuestionsByCategory(button))})}};questionAjaxCall();const answerQuestionsAjaxCall=()=>{function displayNextQuestion(progress){const selectedAnswer=document.querySelector("input[name=answer]:checked");if(selectedAnswer===null){const errors=document.getElementById("errors");const errorMessage="Vous devez sélectionner une réponse !";errors.innerHTML=errorMessage;return}
const answer=document.querySelector("input[name=answer]:checked").value;const gameBloc=document.getElementById("game-question");console.log(progress);const xhr=new XMLHttpRequest();xhr.onreadystatechange=function(){if(this.readyState===4){if(this.status===200){if(progress<9){gameBloc.innerHTML=this.responseText}else{const parser=new DOMParser();const dom=parser.parseFromString(xhr.responseText,"text/html");document.getElementsByTagName("body")[0].innerHTML=dom.getElementsByTagName("body")[0].innerHTML;window.history.pushState(null,"",this.responseURL)}}else{gameBloc.innerHTML="Une erreur s'est produite, merci de contacter l'administrateur du site."}}};xhr.open("GET","/jeu/categorie/reponse/"+answer);xhr.send()}
const validateAnswerButton=document.getElementById("validate-answer");if(validateAnswerButton){validateAnswerButton.addEventListener("click",(event)=>{event.preventDefault();const gameProgress=document.getElementById("game-progress");if(gameProgress.dataset.progress<=9){displayNextQuestion(gameProgress.dataset.progress)}})}};answerQuestionsAjaxCall();const userScoreAjaxCall=()=>{function filterUserScoresByCategory(button){const categoryId=button.dataset.categoryId;const scoresBloc=document.getElementById("category-scores");const xhr=new XMLHttpRequest();xhr.onreadystatechange=function(){if(this.readyState===4){if(this.status===200){scoresBloc.innerHTML=this.responseText}else{scoresBloc.innerHTML="Une erreur s'est produite, merci de contacter l'administrateur du site."}}};xhr.open("GET","/espace-utilisateur/scores/"+categoryId);xhr.send()}
const scoreFilters=document.querySelectorAll('[data-controls="user-score-filter"]');if(scoreFilters.length){scoreFilters.forEach((button)=>{button.addEventListener("click",()=>filterUserScoresByCategory(button))})}};userScoreAjaxCall();function handleClickOutsideMenu(event){const{target}=event;if(!target.matches('#options-menu, #nav-options')){const optionsButton=document.getElementById('nav-options');toggleMobileMenu(optionsButton)}}
function toggleMobileMenu(optionsButton){const expanded=optionsButton.getAttribute('aria-expanded')==='true';optionsButton.setAttribute('aria-expanded',String(!expanded));if(expanded){optionsButton.classList.replace('icon-options-hover','icon-options');optionsMenu.classList.remove('show');document.removeEventListener('click',handleClickOutsideMenu)}else{optionsButton.classList.replace('icon-options','icon-options-hover');optionsMenu.classList.add('show');document.addEventListener('click',handleClickOutsideMenu)}}
const optionsButton=document.getElementById('nav-options');const optionsMenu=document.getElementById('options-menu');if(optionsButton){optionsButton.addEventListener('click',()=>{toggleMobileMenu(optionsButton)})}
window.addEventListener('resize',()=>{optionsButton.classList.replace('icon-options-hover','icon-options');optionsButton.setAttribute('aria-expanded','false');optionsMenu.classList.remove('show');document.removeEventListener('click',handleClickOutsideMenu)})